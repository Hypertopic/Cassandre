version: '3'

services:

  couchdb:
    image: couchdb
    ports:
      - 5984:5984
    volumes:
      - ./data:/opt/couchdb/data
      - ./conf/couchdb.ini:/opt/couchdb/etc/local.d/docker.ini
    logging:
      options:
        max-size: "1M"
        max-file: "3"

  proxy:
    image: node:lts
    command: npm start
    ports:
      - 80:80
    volumes:
      - .:/app
    working_dir: /app
